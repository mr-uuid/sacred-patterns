<!DOCTYPE html>
<html>
  <head>
      <script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
      <script type="text/javascript" src="https://d3js.org/d3-color.v1.min.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js"></script>

  </head>
  <body>
      <div id=context markdown="1">
          ## Changes with this iteration:
          - [x] Have the recursion ... not draw the circles ... but just list out what would get drawn ...
          - [x] Add a final step to draw everything!
          - [x] Use lodash ...
          - [x] Capturing notes per html with markdown using: https://marked.js.org/#/README.md#README.md
          ## Problems with this iteration:
          - [ ] The recursion is in-efficient ...
            - The recursion still start on one side of the main circle ... and extens east ... until it finishes going east ...
            then it starts going north east ... north ... etc until it finishes ... I want the recursion to be more like a raindrop ... !
      </div>
      <!--  Script Section   -->
      <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
      <script type="text/javascript">
       document.getElementById('context').innerHTML =
           marked(document.getElementById('context').innerHTML);
      </script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-markdown-extra@1.2.4/js-markdown-extra.min.js"></script>
      <script type="text/javascript" src="./draw-circles-i4.js"></script>
      <!-- The above should be placed in the body section since it edits body content ...
           https://stackoverflow.com/questions/38407962/when-to-use-the-script-tag-in-the-head-and-body-section-of-a-html-page?noredirect=1&lq=1
           ... it didnt work when it was in head!
       -->

       <script type="text/javascript">

           // Next step is to change how the recursion is working to go inside out with each step ...

           const maxLevels = 5;
           // const existantCircles = {};
           var radius = 100;
           var size = maxLevels * 4;

           var svg = (
               d3.select("body").append("svg")
                 .attr("width", radius*size)
                 .attr("height", radius*size)
           );

           // Recursively Add circles around middle circle ...
           var circles = appendFlowersRecursively(radius*size/2, radius*size/2, radius, maxLevels);
           console.log(circles, _.values(circles));
           _.forEach(
               _.values(circles),
               c => {
                   console.log("appending c", c);
                   appendCircleWithMidpoint(svg, c);
               }
           );

           // Add middle circle
           central = _.values(circle(radius*size/2, radius*size/2, radius))[0];
           console.log(central);
           appendCircleWithMidpoint(svg, central);

       </script>
  </body>
</html>
